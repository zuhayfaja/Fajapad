<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zufa Pad</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; font-src 'self'; object-src 'none'; base-uri 'self'; frame-ancestors 'none'">
    <meta name="referrer" content="no-referrer">
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#f5f0e8">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="light">
    <!-- Top Bar - Brand and Theme -->
    <header class="top-bar toolbar" role="banner" aria-label="Application Header">
        <div class="brand" aria-label="Zufa Pad - Ephemeral Scratchpad">
            <div class="logo" aria-hidden="true">‚Ñ§ùîΩ</div>
            <div class="brand-name">Zufa Pad</div>
            <button id="infoBtn" aria-label="Show information and help" title="Help & Information">‚ÑπÔ∏è</button>
            <button id="menuToggle" class="menu-toggle" aria-label="Toggle menu" aria-expanded="true">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>

        <div class="top-controls">
            <label for="duration">Duration:</label>
            <select id="duration" aria-label="Content duration before fading">
                <option value="1">1 hour</option>
                <option value="6">6 hours</option>
                <option value="12">12 hours</option>
                <option value="24" selected>24 hours</option>
                <option value="48">48 hours</option>
                <option value="168">1 week</option>
                <option value="custom">Custom</option>
            </select>
            <input type="number" id="customHours" placeholder="hours" min="0.1" step="0.1" aria-label="Custom duration in hours" style="display: none;">

            <button id="themeToggle" aria-label="Toggle between light and dark theme" title="Toggle theme"><span class="icon">üåô</span><span class="label">Dark</span></button>
            <button id="exportBtn" aria-label="Export current content" title="Save"><span class="icon">üíæ</span><span class="label">Save</span></button>
            <div id="timerDisplay">
                <span id="countdownTimer" class="timer-text" aria-live="polite" aria-label="Time remaining before content fades">00:00:00</span>
            </div>

            <button id="modeToggle" aria-label="Toggle between text and draw mode" title="Toggle mode"><span class="icon">üìù</span><span class="label">Text</span></button>
        </div>
    </header>

    <!-- Text Formatting Toolbar - Microsoft Word Inspired -->
    <div class="text-toolbar" id="textToolbar" role="toolbar" aria-label="Text Formatting Tools" style="display: none;">
        <div class="toolbar-content">
            <!-- Font Styles Group -->
            <div class="format-group" title="Font Styles">
                <button class="format-btn" data-command="bold" title="Bold (Ctrl+B)" aria-label="Bold text">ùêÅ</button>
                <button class="format-btn" data-command="italic" title="Italic (Ctrl+I)" aria-label="Italic text">ùêº</button>
                <button class="format-btn" data-command="underline" title="Underline (Ctrl+U)" aria-label="Underline text">UÃ≤</button>
                <button class="format-btn" data-command="strikeThrough" title="Strikethrough" aria-label="Strikethrough text">SÃ∂</button>
            </div>

            <!-- Paragraph Styles Group -->
            <div class="format-group" title="Paragraph Styles">
                <button class="format-btn" data-command="formatBlock" data-value="h1" title="Heading 1" aria-label="Heading 1">H1</button>
                <button class="format-btn" data-command="formatBlock" data-value="h2" title="Heading 2" aria-label="Heading 2">H2</button>
                <button class="format-btn" data-command="formatBlock" data-value="h3" title="Heading 3" aria-label="Heading 3">H3</button>
                <button class="format-btn" data-command="formatBlock" data-value="p" title="Paragraph" aria-label="Paragraph">P</button>
            </div>

            <!-- Lists Group -->
            <div class="format-group" title="Lists">
                <button class="format-btn" data-command="insertUnorderedList" title="Bullet List" aria-label="Insert bullet list">‚Ä¢</button>
                <button class="format-btn" data-command="insertOrderedList" title="Numbered List" aria-label="Insert numbered list">1.</button>
            </div>

            <!-- Alignment Group -->
            <div class="format-group" title="Text Alignment">
                <button class="format-btn" data-command="justifyLeft" title="Align Left" aria-label="Align text left">‚¨Ö</button>
                <button class="format-btn" data-command="justifyCenter" title="Align Center" aria-label="Align text center">‚¨å</button>
                <button class="format-btn" data-command="justifyRight" title="Align Right" aria-label="Align text right">‚û°</button>
                <button class="format-btn" data-command="justifyFull" title="Justify" aria-label="Justify text">‚¨å</button>
            </div>

            <!-- Font Controls -->
            <div class="format-group" title="Font Family">
                <select class="format-select" id="fontFamilySelect" title="Font Family" aria-label="Font family">
                    <option value="Arial" selected>Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Verdana">Verdana</option>
                    <option value="Comic Sans MS">Comic Sans MS</option>
                    <option value="Impact">Impact</option>
                    <option value="Tahoma">Tahoma</option>
                    <option value="Trebuchet MS">Trebuchet MS</option>
                    <option value="Lucida Console">Lucida Console</option>
                </select>
            </div>

            <!-- Font Size -->
            <div class="format-group" title="Font Size">
                <select class="format-select" id="fontSizeSelect" title="Font Size" aria-label="Font size">
                    <option value="1">8pt</option>
                    <option value="2">9pt</option>
                    <option value="3" selected>10pt</option>
                    <option value="4">11pt</option>
                    <option value="5">12pt</option>
                    <option value="6">14pt</option>
                    <option value="7">16pt</option>
                    <option value="8">18pt</option>
                    <option value="9">20pt</option>
                    <option value="10">24pt</option>
                    <option value="11">28pt</option>
                    <option value="12">32pt</option>
                    <option value="13">36pt</option>
                    <option value="14">48pt</option>
                    <option value="15">72pt</option>
                    <option value="custom">Custom...</option>
                </select>
                <input type="number" id="customFontSize" placeholder="Size" min="1" max="200" style="display: none;" aria-label="Custom font size in points">
            </div>

            <!-- Text Color -->
            <div class="format-group" title="Text Color">
                <button class="format-btn color-preview-btn" data-command="foreColor" data-value="#000000" title="Text Color" aria-label="Text color" id="textColorBtn">
                    <span class="color-indicator" style="background-color: #000000;"></span>
                    üé®
                </button>
                <input type="color" id="textColorPicker" value="#000000" style="display: none;" aria-label="Choose text color">
            </div>

            <!-- Clear Formatting -->
            <div class="format-group" title="Clear Formatting">
                <button class="format-btn" data-command="removeFormat" title="Clear Formatting" aria-label="Clear all formatting">‚å´</button>
            </div>
        </div>
    </div>

    <!-- Floating Toolbar -->
    <div class="floating-toolbar" id="floatingToolbar" role="toolbar" aria-label="Drawing Tools">
        <div class="toolbar-drag-handle" aria-label="Drag to move toolbar">
            <span class="drag-indicator">‚ãÆ‚ãÆ</span>
        </div>

        <div class="mini-tools" style="display: none;">
            <button class="tool-btn active" data-tool="pen" aria-pressed="true" aria-label="Select pen tool">‚úèÔ∏è</button>
            <button class="tool-btn" data-tool="eraser" aria-pressed="false" aria-label="Select eraser tool">üßΩ</button>
        </div>

        <div class="toolbar-content">
            <div class="control-group" id="colorControls">
                <label>Color:</label>
                <div class="preset-colors" role="group" aria-label="Color presets">
                    <button class="color-btn" style="background: #000000;" data-color="#000000" aria-label="Black color" tabindex="0"></button>
                    <button class="color-btn" style="background: #ff0000;" data-color="#ff0000" aria-label="Red color" tabindex="0"></button>
                    <button class="color-btn" style="background: #00ff00;" data-color="#00ff00" aria-label="Green color" tabindex="0"></button>
                    <button class="color-btn" style="background: #0000ff;" data-color="#0000ff" aria-label="Blue color" tabindex="0"></button>
                    <button class="color-btn" style="background: #ffff00;" data-color="#ffff00" aria-label="Yellow color" tabindex="0"></button>
                    <button class="color-btn" style="background: #ff00ff;" data-color="#ff00ff" aria-label="Magenta color" tabindex="0"></button>
                </div>
                <input type="color" id="colorPicker" class="color-picker" value="#000000" aria-label="Custom color picker">
            </div>

            <div class="control-group" id="drawingTools" style="display: none;">
                <label>Actions:</label>
                <button id="undoBtn" disabled aria-label="Undo last drawing action" aria-disabled="true">‚Ü∂ Undo</button>
                <button id="redoBtn" disabled aria-label="Redo last undone action" aria-disabled="true">‚Ü∑ Redo</button>
                <button id="clearBtn" aria-label="Clear the canvas">üßπ Clear</button>
            </div>

            <div class="control-group" id="drawingTools2" style="display: none;">
                <label>Tool:</label>
                <div class="tool-toggle" role="group" aria-label="Drawing tool selection">
                    <button class="tool-btn active" data-tool="pen" aria-pressed="true" aria-label="Select pen tool">‚úèÔ∏è Pen</button>
                    <button class="tool-btn" data-tool="eraser" aria-pressed="false" aria-label="Select eraser tool">üßΩ Eraser</button>
                </div>
            </div>

            <div class="control-group" id="brushControls" style="display: none;">
                <label for="brushSize">Size:</label>
                <input type="range" id="brushSize" min="1" max="50" value="2" step="1" aria-label="Brush size" aria-valuemin="1" aria-valuemax="50" aria-valuenow="2">
                <span id="brushSizeValue" aria-live="polite">2px</span>
            </div>

            <div class="control-group" id="backgroundControls" style="display: none;">
                <label for="backgroundSelect">Background:</label>
                <select id="backgroundSelect" aria-label="Canvas export background">
                    <option value="white" selected>White</option>
                    <option value="transparent">Transparent</option>
                    <option value="grid">Grid</option>
                </select>
            </div>

            <div class="control-group" id="exportControls" style="display: none;">
                <label>Export:</label>
                <button id="exportCanvasBtn" aria-label="Export current content">üíæ Save</button>
            </div>


        </div>
    </div>

    <main class="content-area">
        <div class="text-container" id="textContainer" role="main" aria-label="Text editing area">
            <div id="textEditor" contenteditable="true" placeholder="Write your ephemeral thoughts here..." aria-label="Ephemeral text content" aria-describedby="fadeNotice" spellcheck="true"></div>
        </div>

        <div class="canvas-container" id="canvasContainer" role="main" aria-label="Drawing canvas" style="display: none;">
            <canvas id="canvas" aria-label="Interactive drawing canvas" tabindex="0"></canvas>
            <div id="brushPreview" class="brush-preview" aria-hidden="true"></div>
        </div>
    </main>

    <!-- Welcome Popup Modal -->
    <div class="welcome-modal-overlay" id="welcomeModal" role="dialog" aria-labelledby="welcomeTitle" aria-describedby="welcomeContent" style="display: none;">
        <div class="welcome-modal">
            <div class="welcome-header">
                <div class="welcome-logo">‚Ñ§ùîΩ</div>
                <h1 id="welcomeTitle" class="welcome-title">Welcome to Zufa Pad</h1>
                <p class="welcome-subtitle">Your private, ephemeral scratchpad</p>
            </div>

            <div id="welcomeContent" class="welcome-content">
                <div class="welcome-section privacy-section">
                    <div class="section-icon">üîí</div>
                    <h3>Privacy First</h3>
                    <p>Your thoughts and sketches stay completely private. Everything runs locally in your browser - no servers, no accounts, no data collection. Your content disappears automatically when you're done.</p>
                </div>

                <div class="welcome-section features-section">
                    <div class="section-icon">‚ú®</div>
                    <h3>How It Works</h3>
                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="feature-icon">üìù</div>
                            <div class="feature-text">
                                <strong>Text & Drawing Modes</strong>
                                <span>Write notes or sketch ideas freely</span>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">‚è∞</div>
                            <div class="feature-text">
                                <strong>Ephemeral Content</strong>
                                <span>Set duration from 1 hour to 1 week</span>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üöÄ</div>
                            <div class="feature-text">
                                <strong>Space Facts</strong>
                                <span>Learn something new during longer sessions</span>
                            </div>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">üíæ</div>
                            <div class="feature-text">
                                <strong>Export Anytime</strong>
                                <span>Save important work before it fades</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="welcome-section tips-section">
                    <div class="section-icon">üí°</div>
                    <h3>Quick Tips</h3>
                    <ul class="tips-list">
                        <li>Choose your preferred duration in the top bar</li>
                        <li>Switch between text and drawing modes anytime</li>
                        <li>Use the floating toolbar for drawing tools</li>
                        <li>Export your work before the timer runs out</li>
                    </ul>
                </div>
            </div>

            <div class="welcome-footer">
                <label class="dont-show-again">
                    <input type="checkbox" id="dontShowAgain">
                    <span>Don't show this again</span>
                </label>
                <button class="welcome-button" id="getStartedBtn">Get Started</button>
            </div>
        </div>
    </div>

    <div class="fade-notice" id="fadeNotice" role="status" aria-live="polite" aria-atomic="true">Content will fade over time</div>

    <footer class="app-footer" role="contentinfo">
        <div class="footer-content">
            <div class="footer-left">
                <span class="footer-open-source">Open Source</span>
            </div>
            <div class="footer-center">
                <div class="space-fact-display" id="spaceFactDisplay">
                    <span class="space-fact-icon">üöÄ</span>
                    <span class="space-fact-text" id="currentSpaceFact">Discover the wonders of space...</span>
                </div>
            </div>
            <div class="footer-right">
                <div class="footer-text">
                    Made with ‚ù§Ô∏è in India
                </div>
                <div class="footer-links">
                    <a href="https://buymeacoffee.com/zuhayfaja" target="_blank" rel="noopener noreferrer" aria-label="Support the project with a donation" title="Donate">
                        <span class="icon">‚òï</span>
                        <span class="label">Donate</span>
                    </a>
                    <a href="https://discord.gg/HBFwpdrf" target="_blank" rel="noopener noreferrer" aria-label="Join our Discord community" title="Discord">
                        <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                        </svg>
                        <span class="label">Discord</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
